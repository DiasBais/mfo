_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26],{"C+bu":function(e,t,n){"use strict";var c=n("nKUr");n("q1tI");t.a=function(){return Object(c.jsx)("footer",{role:"contentinfo",children:"I-credit.kz \u24c7 2021"})}},Co4N:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return n("MSll")}])},MSll:function(e,t,n){"use strict";n.r(t);var c=n("rePB"),a=n("nKUr"),s=n("vDqi"),i=n.n(s),r=n("q1tI"),l=n("dstC"),d=n("C+bu"),o=n("GUC0"),u=n.n(o),j=n("p46w"),m=n.n(j),b=n("/MKj"),h=n("DCcX"),O=n("CaDr");t.default=Object(b.connect)((function(e){return{adminReducer:e.adminReducer}}))((function(e){var t,n=e.adminReducer,s=Object(b.useDispatch)(),o=Object(r.useState)(!0),j=o[0],p=o[1],x=Object(r.useState)([]),f=x[0],_=x[1],g=Object(r.useState)(""),v=g[0],S=g[1],C=Object(r.useState)({id:null,name:null,email:null,role_id:null}),E=C[0],w=C[1],N=Object(r.useState)({name:null,email:null,password:"icredit123",role_id:2}),A=N[0],y=N[1],M=Object(r.useState)(!1),k=M[0],D=M[1],R=f.filter((function(e){return e.id!==n.user.id})),U=function(){D(!1),y({name:null,email:null,password:"icredit123",role_id:2})},G=function(){i.a.get("https://37.18.30.37/api/users",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){_(e.data),p(!1)}))};Object(r.useEffect)((function(){G()}),[]);var K=function(e,t,c){return e===t.id?Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:c+1}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{onChange:function(e){return w({id:E.id,name:e.target.value,email:E.email,role_id:E.role_id})},value:E.name})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{onChange:function(e){return w({id:E.id,name:E.name,email:e.target.value,role_id:E.role_id})},value:E.email})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{onChange:function(e){return w({id:E.id,name:E.name,email:E.email,role_id:e.target.value})},value:E.role_id,children:[Object(a.jsx)("option",{value:"1",children:"Admin"}),Object(a.jsx)("option",{value:"2",children:"Moderator"})]})}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-success mr-2",onClick:function(){i.a.put("https://37.18.30.37/api/edit",{token:m.a.get("admin_token"),email:E.email,name:E.name,role_id:E.role_id,user_id:E.id},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){e.data.success?(s({type:"ADM_SUCCESS_MESSAGE",payload:e.data.message}),S(""),G()):(s({type:"ADM_ERROR_MESSAGE",payload:e.data.message}),G())}))},children:"Save"}),Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return S(""),void G()},children:"Cancel"})]})]},E.id):Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:c+1}),Object(a.jsx)("td",{children:t.name}),Object(a.jsx)("td",{children:t.email}),Object(a.jsx)("td",{children:1===t.role_id?"Admin":"Moderator"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-success mr-2",disabled:1!==n.user.role_id,onClick:function(){return function(e){S(e);var t=f.filter((function(t){return t.id===e}));w({id:e,name:t[0].name,email:t[0].email,role_id:t[0].role_id})}(t.id)},children:"Edit"}),Object(a.jsx)("button",{className:"btn btn-danger",disabled:1!==n.user.role_id,onClick:function(){return e=t.id,void u()({title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",buttons:{catch:{text:"\u0414\u0430",value:"yes"},cancel:"\u041d\u0435\u0442"}}).then((function(t){switch(t){case"yes":i.a.get("https://37.18.30.37/api/deleteAccount?token=".concat(m.a.get("admin_token"),"&user_id=").concat(e),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){e.data.success?(s({type:"ADM_SUCCESS_MESSAGE",payload:e.data.message}),G()):s({type:"ADM_ERROR_MESSAGE",payload:e.data.message})}))}}));var e},children:"Delete"})]})]},t.id)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("main",{role:"main",children:Object(a.jsxs)("section",{class:"panel important",children:[j?Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0443\u0437\u043a\u0430..."}):Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"d-flex mb-3 justify-content-between",children:[Object(a.jsx)("h2",{children:"Users"}),Object(a.jsxs)("button",{className:"btn btn-info",onClick:function(){return D(!0)},disabled:1!==n.user.role_id,children:["\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ",Object(a.jsx)("b",{children:"+"})]})]}),Object(a.jsxs)("table",{className:"table table-striped",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"\u0418\u043c\u044f"}),Object(a.jsx)("th",{scope:"col",children:"Username"}),Object(a.jsx)("th",{scope:"col",children:"\u0420\u043e\u043b\u044c"}),Object(a.jsx)("th",{scope:"col",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})]})}),Object(a.jsx)("tbody",{children:R.map((function(e,t){return K(v,e,t)}))})]})]}),Object(a.jsx)(h.a,{isOpen:k,toggle:function(){return U()},size:"md",children:Object(a.jsx)(O.a,{children:Object(a.jsxs)("form",{className:"form-group",onSubmit:function(e){return function(e){i.a.post("https://37.18.30.37/api/users",{name:A.name,email:A.email,password:A.password,role_id:A.role_id,token:m.a.get("admin_token")},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){e.data.success?(s({type:"ADM_SUCCESS_MESSAGE",payload:e.data.message}),G(),U()):s({type:"ADM_ERROR_MESSAGE",payload:e.data.message})})),e.preventDefault()}(e)},children:[Object(a.jsx)("input",{onChange:function(e){return y({password:A.password,name:e.target.value,email:A.email,role_id:A.role_id})},value:A.name,className:"input-group mb-2",type:"text",placeholder:"\u0418\u043c\u044f"}),Object(a.jsx)("input",{onChange:function(e){return y({password:A.password,name:A.name,email:e.target.value,role_id:A.role_id})},value:A.email,className:"input-group mt-2",type:"text",placeholder:"Username"}),Object(a.jsxs)("select",(t={onChange:function(e){return y({password:A.password,name:A.name,email:A.email,role_id:e.target.value})},value:A.email},Object(c.a)(t,"value",A.role_id),Object(c.a)(t,"className","input-group mt-2"),Object(c.a)(t,"children",[Object(a.jsx)("option",{value:"1",children:"Admin"}),Object(a.jsx)("option",{value:"2",children:"Moderator"})]),t)),Object(a.jsx)("button",{className:"btn btn-info mt-2",disabled:1!==n.user.role_id,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})})]})}),Object(a.jsx)(d.a,{})]})}))},WEkO:function(e,t,n){"use strict";var c=n("nKUr"),a=n("q1tI"),s=n("/MKj");t.a=Object(s.connect)((function(e){var t=e.admmessage;return{visibility:t.visibility,type:t.type,message:t.message}}),null)((function(e){var t=e.visibility,n=e.type,i=e.message;Object(a.useEffect)((function(){i&&setTimeout((function(){r({type:"ADM_CLOSE_MESSAGE"})}),3e3)}),[]);var r=Object(s.useDispatch)();return t&&Object(c.jsxs)("div",{className:"alertt alertt-".concat(n),children:[Object(c.jsx)("span",{className:"close",onClick:function(){return r({type:"ADM_CLOSE_MESSAGE"})},children:Object(c.jsx)("strong",{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",children:"X"})}),Object(c.jsx)("p",{children:i})]})}))},dstC:function(e,t,n){"use strict";var c=n("nKUr"),a=n("q1tI"),s=n("nOHt"),i=n("/MKj"),r=n("p46w"),l=n.n(r),d=n("vDqi"),o=n.n(d),u=n("WEkO");t.a=Object(i.connect)((function(e){return{adminReducer:e.adminReducer}}))((function(e){var t=e.adminReducer,n=Object(s.useRouter)();return Object(a.useEffect)((function(){void 0===l.a.get("admin_token")&&n.push("/")}),[]),t.user.name,Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.a,{}),Object(c.jsxs)("header",{role:"banner",children:[Object(c.jsx)("h1",{children:"I-credit"}),Object(c.jsxs)("ul",{className:"utilities",children:[Object(c.jsx)("li",{className:"users",children:Object(c.jsx)("a",{href:"/admin/main",children:t.user.name})}),Object(c.jsx)("li",{className:"logout warn",onClick:function(){o.a.get("https://37.18.30.37/api/logout?email=".concat(t.user.email),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){n.push("/admin/login"),l.a.remove("admin_token")}))},children:Object(c.jsx)("a",{href:!0,children:"Log Out"})})]})]}),Object(c.jsx)("nav",{role:"navigation",children:Object(c.jsxs)("ul",{className:"main",children:[Object(c.jsx)("li",{className:"edit",children:Object(c.jsx)("a",{className:"/admin/smscenter"===n.pathname?"active":"",href:"smscenter",children:"SMS-Center"})}),Object(c.jsx)("li",{className:"comments",children:Object(c.jsx)("a",{className:"/admin/telegram"===n.pathname?"active":"",href:"telegram",children:"Telegram"})}),Object(c.jsx)("li",{className:"users",children:Object(c.jsx)("a",{className:"/admin/users"===n.pathname?"active":"",href:"users",children:"Manage Users"})})]})})]})}))}},[["Co4N",0,1,2,3,4,5,6,7,9]]]);